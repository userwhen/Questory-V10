/* js/data_piece.js - V80.1 (Expanded & Universal Style) */

window.FragmentDB = {
    // ============================================================
    // 1. ç¢ç‰‡åº« (Fragments) - åè©èˆ‡å½¢å®¹è©
    // ============================================================
    fragments: {
        // --- é€šç”¨å½¢å®¹è© (å¯ç”¨æ–¼ä»»ä½•ç‰©å“/åœ°é») ---
        adj_spooky: [ 
            { val: { zh: "æ²¾æ»¿ä¹¾æ¶¸è¡€è·¡çš„" } }, { val: { zh: "ç©æ»¿åšé‡ç°å¡µçš„" } }, { val: { zh: "è¢«æŸç¨®åŠ›é‡è©›å’’çš„" } }, { val: { zh: "æ•£ç™¼è‘—è…æ•—æ°£æ¯çš„" } } 
        ],
        adj_luxury: [ 
            { val: { zh: "é‘²åµŒè‘—å¯¶çŸ³çš„" } }, { val: { zh: "åƒ¹å€¼é€£åŸçš„" } }, { val: { zh: "æ•£ç™¼è‘—æŸ”å’Œå…‰èŠ’çš„" } }, { val: { zh: "å¸¶æœ‰çš‡å®¶ç´‹ç« çš„" } } 
        ],
        // --- è§’è‰²æ€§æ ¼å½¢å®¹è© (ç”¨æ–¼æˆ€æ„›/NPC) ---
        adj_personality: [ 
            { val: { zh: "çœ¼ç¥ç¸½æ˜¯å¸¶è‘—å‚²æ°£çš„" } }, { val: { zh: "æ€§æ ¼æº«æŸ”å¦‚æ°´çš„" } }, { val: { zh: "çœ‹ä¼¼ç„¡å®³å¯¦å‰‡è…¹é»‘çš„" } }, { val: { zh: "ç¸½æ˜¯å°‘æ ¹ç­‹çš„å¤©ç„¶å‘†" } } 
        ],

        // --- åŸºç¤åè© ---
        item_base: [ 
            { val: { zh: "åŒ•é¦–" } }, { val: { zh: "æ—¥è¨˜æœ¬" } }, { val: { zh: "æ‡·éŒ¶" } }, { val: { zh: "é»ƒéŠ…é‘°åŒ™" } } 
        ],
        location_base: [ 
            { val: { zh: "å¤è€çš„å¤§å»³" } }, { val: { zh: "é™°æš—çš„åœ°ä¸‹å®¤" } }, { val: { zh: "å¯‚éœçš„åœ–æ›¸é¤¨" } }, { val: { zh: "è’å»¢çš„èŠ±åœ’" } } 
        ],
        
        // --- è§’è‰²èº«ä»½ (é€šç”¨åŒ–ï¼Œè®“ä»–å€‘å‡ºç¾åœ¨ä»»ä½•åŠ‡æœ¬éƒ½åˆç†) ---
        npc_role: [
            { val: { zh: "ç¥ç¥•å­¸å¦¹" } }, { val: { zh: "å¹´è¼•ç¸½è£" } }, { val: { zh: "é’æ¢…ç«¹é¦¬" } }, { val: { zh: "ç•°åœ‹è½‰å­¸ç”Ÿ" } } 
        ],
        lover: [ { val: { zh: "å‘½å®šä¹‹äºº" } } ], // è¨˜æ†¶ä½”ä½ç¬¦

        // --- é¤Šæˆå°ˆç”¨ ---
        daughter: [ { val: { zh: "é€™å­©å­" } }, { val: { zh: "å°‘å¥³" } } ], 
        butler: [ { val: { zh: "éš¨è¡Œçš„è€ç®¡å®¶" } }, { val: { zh: "ç¥ç¥•çš„å¼•è·¯äºº" } } ],
        rival: [ { val: { zh: "é«˜å‚²çš„åé–€ä¹‹å¾Œ" } }, { val: { zh: "å¤©è³¦ç•°ç¨Ÿçš„ç«¶çˆ­è€…" } } ],
        r_hobby: [ { val: { zh: "å¤ä»£ç¹ªç•«ä¿®å¾©" } }, { val: { zh: "å¯¦æˆ°åŠè¡“è¨“ç·´" } }, { val: { zh: "å…ƒç´ é­”æ³•ç†è«–" } }, { val: { zh: "å®®å»·ç¦®å„€å­¸ç¿’" } } ],
        r_job: [ { val: { zh: "åœ–æ›¸é¤¨ç®¡ç†å“¡" } }, { val: { zh: "è—¥è‰åœ’è¾²å¤«" } }, { val: { zh: "è²´æ—å®¶åº­æ•™å¸«" } } ],
        r_dream: [ { val: { zh: "çµ±æ²»é€™ç‰‡åœŸåœ°çš„å¥³ç‹" } }, { val: { zh: "å®ˆè­·ä¸–ç•Œçš„å‚³èªªå‹‡è€…" } }, { val: { zh: "å¯Œå¯æ•µåœ‹çš„å•†æ¥­å·¨æ“˜" } } ],

        // --- èˆŠç‰ˆç›¸å®¹ä¿ç•™å€ (Mystery/Horror/Isekai) ---
        location: [
            { val: { zh: "è¢«æš´é¢¨é›ªå°é–çš„æ·±å±±åˆ¥å¢…" }, tags: ['cold', 'isolated'] },
            { val: { zh: "åˆå¤œæ™‚åˆ†çš„å»¢æ£„ç¶œåˆé†«é™¢" }, tags: ['scary', 'dark'] },
            { val: { zh: "è¡Œé§›åœ¨å¤ªå¹³æ´‹ä¸Šçš„è±ªè¯éƒµè¼ª" }, tags: ['luxury', 'sea'] },
            { val: { zh: "åœé›»å¾Œçš„åœ‹ç«‹åœ–æ›¸é¤¨ç¦æ›¸å€" }, tags: ['quiet', 'dark'] },
            { val: { zh: "å‰›ç™¼ç”Ÿéç«ç½çš„ç™¾å¹´å¤å ¡" }, tags: ['ruin', 'history'] }
        ],
        item: [
            { val: { zh: "ä¸€æŠŠæ²¾è‘—ä¹¾æ¶¸è¡€è·¡çš„éŠ€è³ªæ‹†ä¿¡åˆ€" }, tags: ['weapon'] },
            { val: { zh: "ä¸€æœ¬è¢«æ’•å»äº†æœ€å¾Œå¹¾é çš„çš®é©æ—¥è¨˜" }, tags: ['clue'] },
            { val: { zh: "ä¸€å·éŒ„æœ‰å¥‡æ€ªé›œè¨Šçš„èˆŠå¼éŒ„éŸ³å¸¶" }, tags: ['clue'] },
            { val: { zh: "ä¸€æ¢æ•£ç™¼è‘—è‹¦æä»å‘³çš„çµ²è³ªæ‰‹å¸•" }, tags: ['poison'] }
        ],
        enemy: [
            { val: { zh: "æ‰‹æŒç”Ÿé½å·¨æ–§çš„è™•åˆ‘è€…" } }, { val: { zh: "é›™çœ¼æ•£ç™¼ç´…å…‰çš„è®Šç•°é‡ç‹¼" } }, { val: { zh: "å…¨èº«çºæ»¿ç¹ƒå¸¶çš„å¤ä»£å®ˆè¡›" } }
        ],
        location: [
            { val: { zh: "è¢«æš´é¢¨é›ªå°é–çš„æ·±å±±åˆ¥å¢…", en: "Snowy Villa" }, tags: ['cold', 'isolated'] },
            { val: { zh: "åˆå¤œæ™‚åˆ†çš„å»¢æ£„ç¶œåˆé†«é™¢", en: "Abandoned Hospital" }, tags: ['scary', 'dark'] },
            { val: { zh: "è¡Œé§›åœ¨å¤ªå¹³æ´‹ä¸Šçš„è±ªè¯éƒµè¼ª", en: "Luxury Cruise" }, tags: ['luxury', 'sea'] },
            { val: { zh: "åœé›»å¾Œçš„åœ‹ç«‹åœ–æ›¸é¤¨ç¦æ›¸å€", en: "Dark Library" }, tags: ['quiet', 'dark'] },
            { val: { zh: "å‰›ç™¼ç”Ÿéç«ç½çš„ç™¾å¹´å¤å ¡", en: "Burnt Castle" }, tags: ['ruin', 'history'] },
            { val: { zh: "å……æ»¿è¿·éœ§çš„å€«æ•¦åœ°ä¸‹æ°´é“", en: "London Sewer" }, tags: ['damp', 'dirty'] }
        ],
        item: [
            { val: { zh: "ä¸€æŠŠæ²¾è‘—ä¹¾æ¶¸è¡€è·¡çš„éŠ€è³ªæ‹†ä¿¡åˆ€" }, tags: ['weapon'] },
            { val: { zh: "ä¸€æœ¬è¢«æ’•å»äº†æœ€å¾Œå¹¾é çš„çš®é©æ—¥è¨˜" }, tags: ['clue'] },
            { val: { zh: "ä¸€å·éŒ„æœ‰å¥‡æ€ªé›œè¨Šçš„èˆŠå¼éŒ„éŸ³å¸¶" }, tags: ['clue'] },
            { val: { zh: "ä¸€ä¸²åˆ»æœ‰ç¥ç¥•ç¬¦è™Ÿçš„é»ƒéŠ…é‘°åŒ™" }, tags: ['key'] },
            { val: { zh: "ä¸€æ¢æ•£ç™¼è‘—è‹¦æä»å‘³çš„çµ²è³ªæ‰‹å¸•" }, tags: ['poison'] },
            { val: { zh: "ä¸€ä»½å‰›å‰›ä¿®æ”¹éçš„éºç”¢ç¹¼æ‰¿æ–‡ä»¶" }, tags: ['motive'] },
            { val: { zh: "ä¸€éš»åœåœ¨æ¡ˆç™¼æ™‚é–“çš„ç ´ç¢æ‡·éŒ¶" }, tags: ['time'] }
        ],
        enemy: [
            { val: { zh: "æ‰‹æŒç”Ÿé½å·¨æ–§çš„è™•åˆ‘è€…" } },
            { val: { zh: "é›™çœ¼æ•£ç™¼ç´…å…‰çš„è®Šç•°é‡ç‹¼" } },
            { val: { zh: "å…¨èº«çºæ»¿ç¹ƒå¸¶çš„å¤ä»£å®ˆè¡›" } },
            { val: { zh: "ç™¼å‡ºé‡‘å±¬æ‘©æ“¦è²çš„æ©Ÿæ¢°äººå¶" } }
        ],
        // è§’è‰²åº«
        detective: [ { val: { zh: "çœ¼ç¥éŠ³åˆ©çš„ç§å®¶åµæ¢" } }, { val: { zh: "ç¶“é©—è±å¯Œçš„åˆ‘è­¦éšŠé•·" } }, { val: { zh: "è·¯éçš„æ¨ç†å°èªªå®¶" } } ],
        victim: [ { val: { zh: "æ€§æ ¼å­¤åƒ»çš„ç å¯¶å¤§äº¨" } }, { val: { zh: "å‰›ç¹¼æ‰¿éºç”¢çš„å¹´è¼•å¯¡å©¦" } }, { val: { zh: "è²åç‹¼è—‰çš„åœ°ä¸‹éŒ¢èŠè€é—†" } } ],
        suspect_A: [ { val: { zh: "ç¥è‰²æ…Œå¼µçš„å…¼è·å¥³åƒ•" } }, { val: { zh: "æ²ˆé»˜å¯¡è¨€çš„åœ’ä¸è€ä¼¯" } } ],
        suspect_B: [ { val: { zh: "æ¬ ä¸‹é‰…æ¬¾çš„é æˆ¿å§ªå­" } }, { val: { zh: "é‡å¿ƒå‹ƒå‹ƒçš„ç”Ÿæ„åˆå¤¥äºº" } } ],
        killer: [ { val: { zh: "ä¸€ç›´è¡¨ç¾å®Œç¾çš„ç®¡å®¶" } }, { val: { zh: "è² è²¬é©—å±çš„æ³•é†«åŠ©æ‰‹" } } ],
        survivor: [ { val: { zh: "å”¯ä¸€çš„å€–å­˜è€…æ„›éº—çµ²" } }, { val: { zh: "å—å‚·çš„è¨˜è€…é‡Œæ˜‚" } } ],
        monster: [ { val: { zh: "æ®èˆé›»é‹¸çš„ç˜‹ç‹‚æ®ºæ‰‹" } }, { val: { zh: "é•·é«®é®é¢çš„ç´…è¡£å¥³é¬¼" } }, { val: { zh: "ä¾†è‡ªæ·±æ·µçš„è§¸æ‰‹æ€ªç‰©" } } ],
        haunted_place: [ { val: { zh: "è¢«è©›å’’çš„ç¬¬13è™Ÿç—…æˆ¿" } }, { val: { zh: "å‚³èªªä¸­çš„çŒ›é¬¼å­¸æ ¡" } } ]
    },

    // ============================================================
    // 2. åŠ‡æœ¬æ¨¡æ¿ (Templates)
    // ============================================================
    templates: [
        
        // ==========================================
        // [BLOCK A] ğŸ•µï¸â€â™‚ï¸ æ‡¸ç–‘åµæ¢æµ (Mystery)
        // ==========================================
        {
            type: 'setup_crime', id: 'mys_setup_classic',
            text: { zh: [
                "çª—å¤–çš„é›·è²è½Ÿé³´ï¼Œé–ƒé›»ç¬é–“ç…§äº®äº†{location}çš„å¤§å»³ã€‚ç•¶ç‡ˆå…‰å†æ¬¡äº®èµ·æ™‚ï¼ŒåŸæœ¬ååœ¨ä¸»ä½ä¸Šçš„{victim}å·²ç¶“ç™±è»Ÿåœ¨æ¤…å­ä¸Šã€‚",
                "ä»–çš„èƒ¸å£æ’è‘—ä¸€æŠŠå…‡å™¨ï¼Œé®®è¡€æŸ“ç´…äº†åè²´çš„åœ°æ¯¯ã€‚ç©ºæ°£ä¸­ç€°æ¼«è‘—ä¸€è‚¡ä»¤äººçª’æ¯çš„è¡€è…¥å‘³èˆ‡ç«è—¥å‘³ï¼Œä»Šæ™šè¨»å®šç„¡äººèƒ½çœ ã€‚"
            ]},
            slots: ['location', 'victim', 'detective'],
            dialogue: [
                { speaker: "{detective}", text: { zh: "è«¸ä½è«‹å†·éœï¼åœ¨è­¦æ–¹åˆ°é”ä¹‹å‰ï¼Œä»»ä½•äººä¸å¾—é›¢é–‹é€™å€‹æˆ¿é–“ã€‚" } },
                { speaker: "ä½ ", text: { zh: "ï¼ˆåäº†å£å£æ°´ï¼‰çœ‹ä¾†é€™å°‡æ˜¯ä¸€å€‹æ¼«é•·çš„å¤œæ™š..." } }
            ],
            options: [{ 
                label: "å”åŠ©å°é–ç¾å ´", 
                action: "advance_chain", 
                rewards: { tags: ['case_started'], varOps: [{ key: 'clue_progress', val: 0, op: 'set' }] } 
            }]
        },
        {
            type: 'investigate', id: 'mys_inv_detail',
            reqTag: 'case_started',
            text: { zh: [
                "ä½ è¹²ä¸‹èº«å­ï¼Œé¿é–‹åœ°ä¸Šçš„è¡€è·¡ï¼Œä»”ç´°æª¢æŸ¥æ¡ˆç™¼ç¾å ´çš„è§’è½ã€‚åœ¨æ˜æš—çš„ç‡ˆå…‰ä¸‹ï¼Œæ²™ç™¼åº•éƒ¨çš„é™°å½±ä¸­ä¼¼ä¹è—è‘—ä»€éº¼æ±è¥¿ã€‚",
                "ä½ ä¼¸æ‰‹å»æ‘¸ç´¢ï¼ŒæŒ‡å°–è§¸ç¢°åˆ°äº†ä¸€å€‹å†°å†·ã€å …ç¡¬çš„ç‰©é«”ï¼Œé‚£è§¸æ„Ÿè®“ä½ èƒŒè„Šç™¼æ¶¼ã€‚"
            ]},
            slots: ['item'],
            dialogue: [
                { speaker: "æ—ç™½", text: { zh: "ä½ ç”¨é‘·å­å°å¿ƒç¿¼ç¿¼åœ°å¤¾èµ·äº†ä¸€å€‹ç‰©ä»¶â€”â€”{item}ã€‚" } }
            ],
            options: [
                { 
                    label: "ä»”ç´°æ”¶å¥½è­‰ç‰©", 
                    action: "advance_chain", 
                    rewards: { tags: ['clue_found'], varOps: [{ key: 'clue_progress', val: 20, op: '+' }] }, 
                    nextTags: ['clue_found'] 
                },
                { label: "é€™çœ‹èµ·ä¾†ç„¡é—œç·Šè¦", action: "advance_chain", nextTags: ['risk_high'] }
            ]
        },
        {
            type: 'confrontation', id: 'mys_final_reveal',
            text: { zh: [
                "æ‰€æœ‰çš„ç‡ˆå…‰èšç„¦åœ¨å¤§å»³ä¸­å¤®ã€‚ä½ åœ¨çœ¾äººçš„æ³¨è¦–ä¸‹ï¼Œç·©ç·©èˆ‰èµ·æ‰‹ï¼ŒæŒ‡å‘äº†äººç¾¤ä¸­é‚£å€‹çœ‹ä¼¼æœ€ç„¡è¾œçš„äººã€‚",
                "æ‰€æœ‰çš„è­‰æ“šéƒ½å·²ç¶“æ‹¼æ¹Šå®Œæˆï¼Œç¾åœ¨æ˜¯æ­é–‹é€™å ´æ‚²åŠ‡çœŸç›¸çš„æ™‚åˆ»äº†ã€‚"
            ]},
            slots: ['killer', 'detective', 'victim'],
            dialogue: [
                { speaker: "{detective}", text: { zh: "æ®ºå®³{victim}çš„çœŸå…‡ï¼Œå°±æ˜¯ä½ â€”â€”{killer}ï¼" } },
                { speaker: "{killer}", text: { zh: "å‘µå‘µ... æ—¢ç„¶è¢«ç™¼ç¾äº†ï¼Œé‚£å°±æ²’è¾¦æ³•äº†ã€‚ä½ å€‘éƒ½å¾—æ­»åœ¨é€™è£¡ï¼" } }
            ],
            options: [
                { 
                    label: "èˆ‡åµæ¢è¯æ‰‹åˆ¶ä¼å…‡æ‰‹ï¼", 
                    style: "danger", check: { stat: 'STR', val: 5 },
                    nextScene: { text: "ç¶“éä¸€ç•ªæé¬¥ï¼Œå…‡æ‰‹è¢«å£“åˆ¶åœ¨åœ°ä¸Šã€‚æ­£ç¾©çµ‚æ–¼å¾—åˆ°äº†ä¼¸å¼µã€‚", options: [{ label: "æ¡ˆä»¶çµ‚çµ", action: "finish_chain" }] },
                    failScene: { text: "å…‡æ‰‹æ’ç ´çª—æˆ¶é€ƒå…¥äº†é»‘æš—ä¹‹ä¸­... é›–ç„¶çœŸç›¸å¤§ç™½ï¼Œä½†æ­£ç¾©é²åˆ°äº†ã€‚", options: [{ label: "çµæŸèª¿æŸ¥", action: "finish_chain" }] }
                }
            ]
        },

        // ==========================================
        // [BLOCK B] ğŸ‘» ææ€–ç”Ÿå­˜æµ (Horror)
        // ==========================================
        {
            type: 'setup_omen', id: 'hor_setup',
            text: { zh: [
                "ä½ ä¸è©²ä¾†é€™è£¡çš„... å¤§é–€åœ¨ä½ èº«å¾Œé‡é‡é—œä¸Šï¼Œç™¼å‡ºä»¤äººç‰™é…¸çš„é‡‘å±¬æ’æ“Šè²ã€‚",
                "é€™å€‹å‚³èªªä¸­çš„{haunted_place}æ¯”æƒ³åƒä¸­æ›´åŠ é™°å†·ï¼Œç©ºæ°£ä¸­é£„æµ®è‘—ç°å¡µå’Œéœ‰å‘³ã€‚ä½ çš„æ‰‹é›»ç­’é–ƒçˆäº†å…©ä¸‹ï¼Œä¼¼ä¹é›»åŠ›ä¸è¶³äº†ã€‚"
            ]},
            slots: ['haunted_place', 'survivor'],
            dialogue: [
                { speaker: "{survivor}", text: { zh: "è½èªªé€²ä¾†éçš„äººï¼Œæ²’æœ‰ä¸€å€‹èƒ½æ´»è‘—å‡ºå»ã€‚" } },
                { speaker: "æ—ç™½", text: { zh: "é»‘æš—ä¸­ï¼Œä¼¼ä¹æœ‰ç„¡æ•¸é›™çœ¼ç›æ­£åœ¨ç›¯è‘—ä½ ã€‚" } }
            ],
            options: [{ label: "åäº†å£å£æ°´ï¼Œæ¡ç·Šæ‰‹é›»ç­’", action: "advance_chain", rewards: { tags: ['horror_started'] } }]
        },
        {
            type: 'encounter_monster', id: 'hor_monster',
            reqTag: 'horror_started',
            text: { zh: [
                "ä¸€é™£ä»¤äººä½œå˜”çš„è…è‡­å‘³æ’²é¼»è€Œä¾†ã€‚èµ°å»Šç›¡é ­çš„é»‘æš—é–‹å§‹è •å‹•ï¼Œæ…¢æ…¢å‡èšæˆä¸€å€‹å·¨å¤§çš„å¯¦é«”ã€‚",
                "é‚£æ˜¯{monster}ï¼ç‰ æ‰‹è£¡çš„æ­¦å™¨æ‹–åœ¨åœ°æ¿ä¸Šï¼Œç™¼å‡ºåˆºè€³çš„æ‘©æ“¦è²ï¼Œä¸€æ­¥æ­¥å‘ä½ é€¼è¿‘ã€‚"
            ]},
            slots: ['monster'],
            dialogue: [{ speaker: "{monster}", text: { zh: "å¼å–”å–”å–”å–”â€”â€”ï¼ï¼" } }],
            options: [{ label: "è½‰èº«é€ƒè·‘ï¼", action: "advance_chain", nextTags: ['risk_high'] }]
        },
        {
            type: 'final_survival', id: 'hor_end',
            text: { zh: [
                "å‰æ–¹å‡ºç¾äº†ä¸€çµ²å¾®å¼±çš„å…‰äº®ï¼Œé‚£æ˜¯å‡ºå£ï¼ä½ ç”¨ç›¡æœ€å¾Œä¸€çµ²åŠ›æ°£æ’é–‹äº†è¢«å°æ­»çš„æœ¨æ¿ã€‚",
                "æ–°é®®çš„ç©ºæ°£æ¹§å…¥è‚ºéƒ¨ï¼Œä½ è·Œè·Œæ’æ’åœ°è¡å‡ºäº†å¤§é–€ï¼Œç™±å€’åœ¨è‰åœ°ä¸Šï¼Œèº«å¾Œçš„é»‘æš—ç™¼å‡ºäº†ä¸ç”˜çš„æ€’å¼ã€‚"
            ]},
            slots: ['survivor', 'haunted_place'], 
            options: [{ label: "é€ƒå‡ºç”Ÿå¤©", action: "finish_chain", rewards: { removeTags: ['horror_started', 'risk_high'] } }]
        },

        // ==========================================
        // [BLOCK C] âš”ï¸ ç•°ä¸–ç•Œ/å†’éšªæµ (Isekai)
        // ==========================================
        {
            type: 'setup', id: 'isekai_start',
            noTag: 'style_selected',
            text: { zh: [
                "ä¸€é™£æšˆçœ©éå¾Œï¼Œä½ çœé–‹çœ¼ï¼Œç™¼ç¾è‡ªå·±ä¸å†ç†Ÿæ‚‰çš„åŸå¸‚è£¡ã€‚çœ¼å‰æ˜¯ä¸€ç‰‡è’è•ªçš„{location}ï¼Œå¤©ç©ºä¸­æ›è‘—å…©å€‹æœˆäº®ã€‚",
                "é è™•å‚³ä¾†äº†{enemy}çš„å’†å“®è²ï¼Œè€Œä½ æ‰‹é‚Šåªæœ‰ä¸€æŠŠç”Ÿé½çš„åŠå’Œä¸€ä»¶ç ´èˆŠçš„æ–—ç¯·ã€‚"
            ]},
            slots: ['location', 'enemy'],
            options: [
                { label: "æ‹¿èµ·åŠï¼Œæº–å‚™æˆ°é¬¥", action: "advance_chain", rewards: { tags: ['style_selected', 'style_combat'], varOps: [{key:'hp', val:100, op:'set'}] } },
                { label: "æŠ«ä¸Šæ–—ç¯·ï¼Œéš±åŒ¿æ°£æ¯", action: "advance_chain", rewards: { tags: ['style_selected', 'style_stealth'], varOps: [{key:'stealth', val:50, op:'set'}] } }
            ]
        },
        {
            type: 'event', id: 'isekai_event_fight',
            reqTag: 'style_combat',
            text: { zh: [
                "ä¸€ç¾¤{enemy}å¾å²©çŸ³å¾Œæ–¹ç«„äº†å‡ºä¾†ï¼Œæ“‹ä½äº†ä½ çš„å»è·¯ï¼ç‰ å€‘çœ‹èµ·ä¾†é£¢è…¸è½†è½†ï¼Œé¡¯ç„¶æŠŠä½ ç•¶æˆäº†ä»Šæ™šçš„æ™šé¤ã€‚",
                "ä½ æ¡ç·Šæ‰‹ä¸­çš„åŠï¼ŒæŒå¿ƒå¾®å¾®å‡ºæ±—ï¼Œæº–å‚™è¿æ¥é€™å ´ç”Ÿæ­»ä¹‹æˆ°ã€‚"
            ]},
            slots: ['enemy'],
            options: [
                { label: "æ­£é¢çªç ´ï¼(STRæª¢å®š)", check: { stat: 'STR', val: 5 }, action: "advance_chain", nextScene: { text: "ä½ åƒæˆ°ç¥ä¸€æ¨£æ®èˆæ­¦å™¨ï¼Œæ®ºå‡ºäº†ä¸€æ¢è¡€è·¯ï¼" }, failScene: { text: "é›™æ‹³é›£æ•µå››æ‰‹ï¼Œä½ å—äº†å‚·ï¼Œå‹‰å¼·æ‰çªåœã€‚", rewards: { energy: -10 } } }
            ]
        },

        // ==========================================
        // [BLOCK E] ğŸ’• æˆ€æ„›é¤Šæˆæµ (Universal Romance)
        // è¨­è¨ˆç†å¿µï¼šä¸å¯«æ­»ã€Œå­¸æ ¡ã€ï¼Œè€Œæ˜¯ç”¨ã€Œç›¸é‡ã€ï¼Œè®“å®ƒèƒ½ç™¼ç”Ÿåœ¨å†’éšªé€”ä¸­ã€‚
        // ==========================================

        // --- éšæ®µ 1: å‘½é‹çš„ç›¸é‡ (Love Meet) ---
        {
            type: 'love_meet', id: 'rom_meet_bump',
            text: { zh: [
                "åœ¨è½‰è§’çš„é™°å½±è™•ï¼Œå‘½é‹è®“ä½ å€‘çŒ›çƒˆåœ°æ’åœ¨äº†ä¸€èµ·ã€‚ä½ æ„Ÿè¦ºè‡ªå·±æ’ä¸Šäº†ä¸€å€‹æŸ”è»Ÿå»å …éŸŒçš„è»€é«”ã€‚",
                "æ›¸æœ¬èˆ‡éš¨èº«ç‰©å“æ•£è½äº†ä¸€åœ°ï¼Œç•¶ä½ æŠ¬èµ·é ­æ™‚ï¼Œçœ‹è¦‹äº†ä¸€ä½{adj_personality}{npc_role}æ­£æ‰è‘—è‚©è†€ã€‚"
            ]},
            slots: ['adj_personality', 'npc_role', 'lover'], 
            dialogue: [
                { speaker: "{lover}", text: { zh: "å¥½ç—›... é€™è£¡æ€éº¼æœƒæœ‰äººçªç„¶è¡å‡ºä¾†ï¼Ÿ" } },
                { speaker: "ä½ ", text: { zh: "æŠ±æ­‰ï¼æˆ‘æ²’æ³¨æ„åˆ°è·¯æ³ï¼Œè®“æˆ‘å¹«ä½ æ’¿èµ·ä¾†ï¼" } }
            ],
            options: [
                { 
                    label: "å±•ç¾ç´³å£«é¢¨åº¦ (é­…åŠ›æª¢å®š)", 
                    check: { stat: 'CHR', val: 3 }, 
                    action: "advance_chain", 
                    rewards: { 
                        varOps: [{ key: 'love_meter', val: 10, op: 'set' }], 
                        tags: ['romantic_vibe'] 
                    },
                    nextScene: { text: "å°æ–¹çœ‹è‘—ä½ èªçœŸçš„å´è‡‰ï¼Œè‡‰é °å¾®å¾®æ³›ç´…ï¼Œä¼¼ä¹å°ä½ ç•™ä¸‹äº†ä¸éŒ¯çš„å°è±¡ã€‚" }
                },
                { 
                    label: "åŒ†å¿™é“æ­‰å¾Œé›¢é–‹", 
                    action: "advance_chain", 
                    rewards: { varOps: [{ key: 'love_meter', val: 0, op: 'set' }] } 
                }
            ]
        },

        // --- éšæ®µ 2: æ—…é€”ä¸­çš„äº¤å¿ƒ (Love Chat) ---
        {
            type: 'love_chat', id: 'rom_chat_hobby',
            reqTag: 'romantic_vibe', 
            text: { zh: [
                "å†’éšªçš„é€”ä¸­é›£å¾—æœ‰ç‰‡åˆ»çš„å¯§éœã€‚ä½ å’Œ{lover}ä¸¦è‚©ååœ¨ç‡Ÿç«æ—ï¼ˆæˆ–æ˜¯å’–å•¡å»³çš„è§’è½ï¼‰ï¼Œäº«å—è‘—çŸ­æš«çš„ä¼‘æ¯ã€‚",
                "è©±é¡Œä¸çŸ¥ä¸è¦ºè½‰åˆ°äº†å½¼æ­¤çš„èˆˆè¶£ä¸Šï¼Œæ°£æ°›è®Šå¾—è¼•é¬†èµ·ä¾†ã€‚"
            ]},
            slots: ['lover'],
            options: [
                { 
                    label: "èŠèŠå½¼æ­¤çš„å¤¢æƒ³ (+10 å¥½æ„Ÿ)", 
                    action: "advance_chain", 
                    rewards: { varOps: [{ key: 'love_meter', val: 10, op: '+' }] },
                    nextScene: { text: "ä½ å€‘ç™¼ç¾å½¼æ­¤ç«Ÿç„¶æœ‰è‘—é©šäººçš„ç›¸ä¼¼ä¹‹è™•ï¼Œè·é›¢ç¬é–“æ‹‰è¿‘äº†ã€‚" }
                },
                { 
                    label: "æ²ˆé»˜åœ°çœ‹è‘—é¢¨æ™¯", 
                    action: "advance_chain",
                    nextScene: { text: "{lover} ä¼¼ä¹æœ‰äº›çäº†ï¼Œé åœ¨ä¸€æ—é–‰ç›®é¤Šç¥ã€‚" }
                }
            ]
        },

        // --- éšæ®µ 3: å…±åº¦çš„æ™‚å…‰ (Love Date) ---
        {
            type: 'love_date', id: 'rom_date_park',
            text: { zh: [
                "ä½ å€‘ä¾†åˆ°äº†ä¸€å€‹{location_base}ã€‚é€™è£¡çš„æ°›åœç•°å¸¸ç¨ç‰¹ï¼Œå‘¨åœå……æ»¿äº†{adj_luxury}è£é£¾ã€‚",
                "é é›¢äº†æ—¥å¸¸çš„å–§å›‚èˆ‡å±éšªï¼Œæ­¤åˆ»çš„ä¸–ç•Œå½·å½¿åªå‰©ä¸‹ä½ å€‘å…©å€‹äººã€‚"
            ]},
            slots: ['location_base', 'adj_luxury', 'lover'],
            dialogue: [
                { speaker: "{lover}", text: { zh: "å¦‚æœæ™‚é–“èƒ½æ°¸é åœç•™åœ¨é€™ä¸€åˆ»ï¼Œé‚£è©²æœ‰å¤šå¥½ã€‚" } }
            ],
            options: [
                { 
                    label: "è¼•è¼•ç‰½èµ·å°æ–¹çš„æ‰‹ (éœ€å¥½æ„Ÿ 20)", 
                    condition: { var: { key: 'love_meter', val: 20, op: '>=' } },
                    action: "advance_chain",
                    rewards: { varOps: [{ key: 'love_meter', val: 20, op: '+' }], tags: ['hand_hold'] },
                    nextScene: { text: "æŒ‡å°–å‚³ä¾†äº†æº«æš–çš„è§¸æ„Ÿï¼Œå°æ–¹æ²’æœ‰æ‹’çµ•ï¼Œåæ¡ä½äº†ä½ çš„æ‰‹ã€‚" }
                },
                { label: "ä¿æŒç¦®è²Œçš„è·é›¢", action: "advance_chain" }
            ]
        },

        // --- éšæ®µ 4: æƒ…æ„Ÿçš„å±æ©Ÿ (Love Crisis) ---
        {
            type: 'love_crisis', id: 'rom_crisis_rival',
            text: { zh: [
                "å°±åœ¨æ°£æ°›æ­£å¥½æ™‚ï¼Œä¸€å€‹{adj_personality}äººå½±æ“‹ä½äº†å»è·¯ã€‚æ°£æ°›ç¬é–“é™åˆ°äº†å†°é»ã€‚",
                "é‚£æ˜¯ä½ çš„å®¿æ•µâ€”â€”{rival}ï¼ä»–çœ‹è‘—ä½ å€‘ç‰½åœ¨ä¸€èµ·çš„æ‰‹ï¼Œç™¼å‡ºäº†ä¸€è²å†·ç¬‘ã€‚"
            ]},
            slots: ['adj_personality', 'rival', 'lover'],
            dialogue: [
                { speaker: "{rival}", text: { zh: "{lover}ï¼Œé€™å°±æ˜¯ä½ é¸æ“‡çš„äººï¼Ÿé€™ç¨®è²¨è‰²é…å¾—ä¸Šä½ å—ï¼Ÿ" } }
            ],
            options: [
                { 
                    label: "æŒºèº«è€Œå‡ºç¶­è­·å°æ–¹", 
                    action: "advance_chain", 
                    rewards: { varOps: [{ key: 'love_meter', val: 30, op: '+' }] },
                    nextScene: { text: "ä½ å …å®šçš„æ…‹åº¦è®“æƒ…æ•µçŸ¥é›£è€Œé€€ã€‚{lover}çœ‹è‘—ä½ çš„èƒŒå½±ï¼Œçœ¼ç¥å……æ»¿äº†å´‡æ‹œã€‚" }
                },
                { 
                    label: "çŒ¶è±«ä¸æ±º", 
                    action: "advance_chain",
                    rewards: { varOps: [{ key: 'love_meter', val: 10, op: '-' }] }
                }
            ]
        },

        // --- éšæ®µ 5: å‘Šç™½çµå±€ (Love Confession) ---
        {
            type: 'love_confession', id: 'rom_end_best',
            text: { zh: [
                "å¤•é™½å°‡å¤©ç©ºæŸ“æˆäº†é‡‘ç´…è‰²ï¼Œ{lover}åœä¸‹äº†è…³æ­¥ï¼Œè½‰èº«çœ‹è‘—ä½ ã€‚",
                "é¢¨å¹éé«®æ¢¢ï¼Œå°æ–¹è‡‰ä¸Šçš„ç´…æšˆæ¯”æ™šéœé‚„è¦è¿·äººï¼Œä¼¼ä¹åœ¨ç­‰å¾…è‘—ä»€éº¼ã€‚"
            ]},
            slots: ['lover'],
            options: [
                { 
                    label: "ã€Œæˆ‘å–œæ­¡ä½ ï¼ã€ (éœ€å¥½æ„Ÿ 60)", 
                    style: "primary",
                    condition: { var: { key: 'love_meter', val: 60, op: '>=' } },
                    action: "finish_chain", 
                    nextScene: { 
                        text: "ã€Happy Endã€‘\n{lover}å¾®ç¬‘è‘—æŠ±ä½äº†ä½ ã€‚ã€Œæˆ‘ä¹Ÿç­‰ä½ é€™å¥è©±å¾ˆä¹…äº†ï¼Œç„¡è«–æœªä¾†å¦‚ä½•ï¼Œæˆ‘å€‘éƒ½ä¸€èµ·é¢å°ã€‚ã€",
                        rewards: { exp: 1000, tags: ['relationship_official'] }
                    }
                },
                { 
                    label: "å°‡é€™ä»½å¿ƒæ„è—åœ¨å¿ƒåº•...", 
                    condition: { var: { key: 'love_meter', val: 60, op: '<' } },
                    action: "finish_chain", 
                    nextScene: { 
                        text: "ã€Normal Endã€‘\nä½ æœ€çµ‚æ²’æœ‰èªªå‡ºå£ã€‚{lover}éœ²å‡ºäº†ä¸€çµ²å¤±è½çš„è¡¨æƒ…ï¼Œè½‰èº«é›¢å»ï¼Œä½ å€‘çµ‚ç©¶åªæ˜¯éå®¢ã€‚",
                        rewards: { exp: 100 }
                    }
                }
            ]
        },

        // ==========================================
        // [BLOCK F] ğŸŒ± é¤Šæˆæ¨¡æ“¬æµ (Universal Raising)
        // è¨­è¨ˆç†å¿µï¼šæŠŠã€Œé¤Šå¥³å…’ã€è½‰åŒ–ç‚ºã€Œå®ˆè­·/å°å¸«ã€é—œä¿‚ï¼Œé©åˆä»»ä½•èƒŒæ™¯ã€‚
        // ==========================================

        // --- éšæ®µ 1: å‘½é‹çš„è¨—ä»˜ (Birth/Found) ---
        {
            type: 'r_birth', id: 'raise_start',
            text: { zh: [
                "é€™æ˜¯ä¸€å€‹æ˜Ÿå…‰ç’€ç’¨çš„å¤œæ™šï¼Œå‘½é‹å°‡é€™å€‹å­©å­è¨—ä»˜çµ¦äº†ä½ ã€‚",
                "ä½ çœ‹è‘—{daughter}åœ¨å»¢å¢Ÿï¼ˆæˆ–æ–ç±ƒï¼‰ä¸­ç†Ÿç¡çš„è‡‰é¾ï¼Œæ„Ÿå—åˆ°äº†ä¸€è‚¡æ²ˆé‡çš„è²¬ä»»ã€‚",
                "ç„¡è«–å¤–é¢çš„ä¸–ç•Œå¤šéº¼å±éšªï¼Œä½ æ±ºå¿ƒå°‡å¥¹åŸ¹é¤Šæˆä¸€ä½å‡ºè‰²çš„äººã€‚"
            ]},
            slots: ['daughter', 'butler'],
            dialogue: [
                { speaker: "{butler}", text: { zh: "ä¸»äººï¼Œé€™å­©å­çš„æœªä¾†å°±æŒæ¡åœ¨æ‚¨æ‰‹ä¸­äº†ã€‚æ‚¨çš„é¸æ“‡å°‡æ±ºå®šå¥¹çš„å‘½é‹ã€‚" } }
            ],
            options: [
                { 
                    label: "å°ˆæ³¨æ–¼åŸ¹é¤Šæ°£è³ª (é­…åŠ›å‹)", 
                    action: "advance_chain", 
                    rewards: { varOps: [{key:'chr', val:50, op:'set'}, {key:'str', val:10, op:'set'}] } 
                },
                { 
                    label: "å°ˆæ³¨æ–¼é›éŠé«”é­„ (æˆ°é¬¥å‹)", 
                    action: "advance_chain", 
                    rewards: { varOps: [{key:'chr', val:10, op:'set'}, {key:'str', val:50, op:'set'}] } 
                }
            ]
        },

        // --- éšæ®µ 2: æˆé•·çš„èˆˆè¶£ (Childhood) ---
        {
            type: 'r_childhood', id: 'raise_child_hobby',
            text: { zh: [
                "æ™‚å…‰é£›é€ï¼Œ{daughter}å·²ç¶“é–‹å§‹å±•ç¾å‡ºå¥¹ç¨ç‰¹çš„å€‹æ€§ã€‚",
                "æœ€è¿‘å¥¹ä¼¼ä¹å°ã€{r_hobby}ã€‘ç‰¹åˆ¥è‘—è¿·ï¼Œæ•´å¤©éƒ½åœ¨æ¨¡ä»¿æ›¸ä¸Šçš„å‹•ä½œï¼Œçœ¼è£¡é–ƒçˆè‘—å…‰èŠ’ã€‚"
            ]},
            slots: ['daughter', 'r_hobby'],
            options: [
                { 
                    label: "å…¨åŠ›æ”¯æŒå¥¹çš„èˆˆè¶£ (é‡‘å¹£-50)", 
                    action: "advance_chain", 
                    condition: { var: { key: 'gold', val: 50, op: '>=' } },
                    rewards: { gold: -50, varOps: [{key:'stress', val:10, op:'+'}, {key:'int', val:20, op:'+'}] },
                    nextScene: { text: "å¥¹é–‹å¿ƒåœ°æŠ•å…¥äº†ç·´ç¿’ï¼Œé€²æ­¥ç¥é€Ÿï¼Œä½ çœ‹è‘—å¥¹çš„èƒŒå½±æ„Ÿåˆ°ç„¡æ¯”æ¬£æ…°ã€‚" }
                },
                { 
                    label: "è®“å¥¹å¹«å¿™è™•ç†é›œå‹™ (é­…åŠ›+)", 
                    action: "advance_chain", 
                    rewards: { varOps: [{key:'stress', val:10, op:'-'}, {key:'chr', val:5, op:'+'}] },
                    nextScene: { text: "å¥¹é›–ç„¶å˜Ÿè‘—å˜´ï¼Œä½†é‚„æ˜¯ä¹–ä¹–å»å¹«å¿™äº†ï¼Œé€™ä¹ŸåŸ¹é¤Šäº†å¥¹çš„è²¬ä»»æ„Ÿã€‚" }
                }
            ]
        },

        // --- éšæ®µ 3: ç¤¾æœƒçš„æ­·ç·´ (Adolescence) ---
        {
            type: 'r_adolescence', id: 'raise_teen_work',
            text: { zh: [
                "{daughter}é•·å¤§äº†ï¼Œå¥¹é–‹å§‹å˜—è©¦æ¥è§¸å¤–é¢çš„ä¸–ç•Œï¼Œä¸å†èº²åœ¨ä½ çš„ç¾½ç¿¼ä¹‹ä¸‹ã€‚",
                "æ†‘è—‰è‘—è‡ªå·±çš„åŠªåŠ›ï¼Œå¥¹æ‰¾åˆ°äº†ä¸€ä»½ã€{r_job}ã€‘çš„å·¥ä½œï¼Œé–‹å§‹é«”é©—äººç”Ÿçš„é…¸ç”œè‹¦è¾£ã€‚"
            ]},
            slots: ['daughter', 'r_job'],
            options: [
                { 
                    label: "é¼“å‹µå¥¹åŠªåŠ›å·¥ä½œ (ç²å¾—é‡‘å¹£)", 
                    action: "advance_chain", 
                    rewards: { gold: 100, varOps: [{key:'stress', val:20, op:'+'}] } 
                },
                { 
                    label: "å¸¶å¥¹å»æµ·é‚Šæ•£å¿ƒ (æ¶ˆé™¤å£“åŠ›)", 
                    action: "advance_chain",
                    rewards: { varOps: [{key:'stress', val:50, op:'-'}] } 
                }
            ]
        },

        // --- éšæ®µ 4: å‘½é‹çš„è©¦ç…‰ (Event) ---
        {
            type: 'r_event', id: 'raise_festival',
            text: { zh: [
                "ä¸€å¹´ä¸€åº¦çš„ç››å¤§æ…¶å…¸é–‹å§‹äº†ï¼å»£å ´ä¸Šäººå±±äººæµ·ï¼Œå„åœ°çš„ç²¾è‹±éƒ½åŒ¯èšæ–¼æ­¤ã€‚",
                "ä½ çš„å‹æ•µ{rival}ä¹Ÿå‡ºç¾äº†ï¼Œå¥¹æŒ‘é‡åœ°çœ‹è‘—ä½ å€‘ï¼Œé€™æ˜¯ä¸€å ´é—œä¹æ¦®è­½çš„å°æ±ºã€‚"
            ]},
            slots: ['rival'],
            dialogue: [
                { speaker: "{rival}", text: { zh: "å“¼ï¼Œé€™æ¬¡å† è»éæˆ‘è«å±¬ã€‚ä½ å€‘æœ€å¥½ç¾åœ¨å°±æ£„æ¬Šã€‚" } }
            ],
            options: [
                { 
                    label: "åƒåŠ é¸ç¾å¤§è³½ (æª¢å®šé­…åŠ›)", 
                    check: { stat: 'CHR', val: 50 }, 
                    action: "advance_chain",
                    nextScene: { text: "å…¨å ´éƒ½è¢«å¥¹çš„å„ªé›…èˆ‡ç¾è²Œé©šè±”äº†ï¼å¥¹æ§èµ·äº†å† è»çç›ƒï¼", rewards: { gold: 500, tags: ['fame_high'] } },
                    failScene: { text: "å¯æƒœï¼Œè©•å¯©ä¼¼ä¹æ›´å–œæ­¡å¦ä¸€ç¨®é¢¨æ ¼ï¼Œä½†å¥¹å·²ç¶“ç›¡åŠ›äº†ã€‚", rewards: { varOps: [{key:'stress', val:20, op:'+'}] } }
                },
                { 
                    label: "åƒåŠ æ­¦é¬¥å¤§æœƒ (æª¢å®šåŠ›é‡)", 
                    check: { stat: 'STR', val: 50 }, 
                    action: "advance_chain",
                    nextScene: { text: "å¥¹ä¸€æ‹³æ“Šå€’äº†å°æ‰‹ï¼æ­¡å‘¼è²éŸ¿å¾¹é›²éœ„ï¼Œå¥¹æ˜¯ç•¶ä¹‹ç„¡æ„§çš„å† è»ï¼", rewards: { gold: 500, tags: ['fame_high'] } }
                }
            ]
        },

        // --- éšæ®µ 5: é¤Šæˆçš„çµ‚ç«  (Ending) ---
        {
            type: 'r_ending', id: 'raise_end_check',
            text: { zh: [
                "çµ‚æ–¼ï¼Œåˆ°äº†å¥¹ç¨ç«‹çš„é€™ä¸€å¤©ã€‚ä½ çœ‹è‘—çœ¼å‰é€™ä½ç¨ç•¶ä¸€é¢çš„å¥³æ€§ï¼Œå¿ƒä¸­å……æ»¿äº†æ„Ÿæ…¨ã€‚",
                "å¥¹è½‰éèº«ï¼Œçœ¼ç¥å …å®šåœ°æœ›å‘é æ–¹ï¼Œé‚£æ˜¯å¥¹å³å°‡è¸ä¸Šçš„æ—…ç¨‹ã€‚"
            ]},
            slots: ['daughter', 'r_dream'],
            dialogue: [
                { speaker: "{daughter}", text: { zh: "è¬è¬æ‚¨é¤Šè‚²æˆ‘é•·å¤§... æˆ‘æ±ºå®šå»è¿½å°‹æˆ‘çš„å¤¢æƒ³ï¼šæˆç‚º{r_dream}ï¼" } }
            ],
            options: [
                { 
                    label: "è¦‹è­‰å¥¹çš„åŠ å†• (CHR > 100)", 
                    style: "primary",
                    condition: { 
                        vars: [{key:'chr', val:100, op:'>='}, {key:'fame_high', op:'hasTag'}] 
                    }, 
                    action: "finish_chain", 
                    nextScene: { text: "ã€çµå±€ï¼šå‚³èªªçš„å¥³ç‹ã€‘\nå¥¹æˆç‚ºäº†å²ä¸Šæœ€å—æ„›æˆ´çš„å¥³ç‹ï¼Œè€Œä½ å°‡æ°¸é æ˜¯å¥¹èƒŒå¾Œçš„å®ˆè­·è€…ã€‚" }
                },
                { 
                    label: "é€å¥¹ä¸Šæˆ°å ´ (STR > 80)", 
                    condition: { var: { key: 'str', val: 80, op: '>=' } }, 
                    action: "finish_chain",
                    nextScene: { text: "ã€çµå±€ï¼šå¸åœ‹å°‡è»ã€‘\nå¥¹çš„åå­—å°‡éŸ¿å¾¹æ²™å ´ï¼Œæˆç‚ºåŸéŠè©©äººå£ä¸­çš„å‚³å¥‡ã€‚" }
                },
                { 
                    label: "ç¥ç¦å¹³å‡¡çš„å¥¹", 
                    action: "finish_chain",
                    nextScene: { text: "ã€çµå±€ï¼šå¹³å‡¡çš„å¹¸ç¦ã€‘\nå¥¹é¸æ“‡äº†é é›¢ç´›çˆ­ï¼Œéè‘—å¹³éœè€Œå¿«æ¨‚çš„æ—¥å­ã€‚é€™æˆ–è¨±æ‰æ˜¯æœ€å¥½çš„çµå±€ã€‚" }
                }
            ]
        },

        // ==========================================
        // [BLOCK D] ğŸ§© è¬ç”¨å¡«å……å€ (Universal Filler)
        // ==========================================
        {
            type: 'event', id: 'filler_rest',
            text: { zh: [
                "ç¶“æ­·äº†å‰›æ‰çš„æ³¢æŠ˜ï¼Œä½ æ„Ÿåˆ°èº«å¿ƒä¿±ç–²ã€‚ä½ æ‰¾åˆ°äº†ä¸€å€‹ç›¸å°ä¹¾ç‡¥ä¸”éš±è”½çš„è§’è½ï¼Œæ±ºå®šç¨ä½œä¼‘æ¯ã€‚",
                "é€™è£¡æš«æ™‚æ²’æœ‰å±éšªçš„æ°£æ¯ï¼Œåªæœ‰é è™•å¶çˆ¾å‚³ä¾†çš„é¢¨è²ï¼Œæ­£å¥½å¯ä»¥æ•´ç†ä¸€ä¸‹æ€ç·’ã€‚"
            ]},
            options: [{ label: "é–‰ç›®é¤Šç¥ï¼Œæ¢å¾©é«”åŠ› (ç²¾åŠ›+5)", action: "advance_chain", rewards: { energy: 5 } }]
        },
        {
            type: 'event', id: 'filler_noise',
            text: { zh: [
                "çªç„¶ï¼Œä¸€é™£å¥‡æ€ªçš„è²éŸ¿è®“ä½ ç«‹åˆ»åœä¸‹äº†è…³æ­¥ã€‚ä½ å±ä½å‘¼å¸ï¼Œæ­»æ­»ç›¯è‘—é»‘æš—çš„æ·±è™•ã€‚",
                "æ‰‹å¿ƒæäº†ä¸€æŠŠå†·æ±—ï¼Œå¿ƒè‡ŸåŠ‡çƒˆè·³å‹•ã€‚å¹¾ç§’é˜å¾Œï¼Œä¸€éš»è‚¥ç¢©çš„è€é¼ å¾è§’è½ç«„å‡ºï¼ŒåŸä¾†åªæ˜¯è™›é©šä¸€å ´ã€‚"
            ]},
            options: [{ label: "é¬†äº†ä¸€å£æ°£ï¼Œç¹¼çºŒå‰é€²", action: "advance_chain" }]
        },
        {
            type: 'event', id: 'univ_merchant',
            text: { zh: [
                "åœ¨è½‰è§’çš„é™°å½±ä¸­ï¼Œä½ é‡åˆ°äº†ä¸€ä½æˆ´è‘—çƒé´‰é¢å…·çš„ç¥ç§˜å•†äººã€‚ä»–èº«é‚Šå †æ»¿äº†å„ç¨®å¥‡å¥‡æ€ªæ€ªçš„é“å…·ã€‚",
                "é€™çœ‹èµ·ä¾†åƒæ˜¯ä¸€å€‹ç§»å‹•çš„é›œè²¨èˆ–ï¼Œä¸çŸ¥é“ä»–ç‚ºä»€éº¼æœƒå‡ºç¾åœ¨é€™ç¨®å±éšªçš„åœ°æ–¹ã€‚"
            ]},
            dialogue: [{ speaker: "å•†äºº", text: { zh: "å˜¿å˜¿... æ—…è¡Œè€…ï¼Œéœ€è¦é»å¥½æ±è¥¿ä¾†ä¿å‘½å—ï¼Ÿåªè¦ä½ æœ‰è¶³å¤ çš„é‡‘å¹£ã€‚" } }],
            options: [
                { 
                    label: "è³¼è²·é—œéµæƒ…å ± (é‡‘å¹£-50)", 
                    condition: { var: { key: 'gold', val: 50, op: '>=' } },
                    action: "advance_chain", 
                    rewards: { gold: -50, tags: ['clue_found', 'motive_confirmed'] } 
                },
                { label: "æ–æ–é ­é›¢é–‹", action: "advance_chain" }
            ]
        },
        {
            type: 'event', id: 'univ_lucky_chest',
            text: { zh: [
                "åœ¨å»¢å¢Ÿçš„ç“¦ç¤«å †ä¸­ï¼Œä½ ç™¼ç¾äº†ä¸€å€‹æ•£ç™¼è‘—å¾®å¼±é‡‘å…‰çš„å¯¶ç®±ã€‚ç®±å­ä¸Šæ²’æœ‰é–ï¼Œä¸Šé¢åˆ»è‘—ä¸€è¡Œå¤è€çš„æ–‡å­—ã€‚",
                "ã€ç»çµ¦æœ‰ç·£äººã€ã€‚é€™æ˜¯å‘½é‹çš„é¤½è´ˆï¼Ÿé‚„æ˜¯ä¸€å€‹è‡´å‘½çš„é™·é˜±ï¼Ÿ"
            ]},
            options: [
                { 
                    label: "è³­ä¸€æŠŠæ‰“é–‹å®ƒ (LUCKæª¢å®š)", 
                    check: { stat: 'LUCK', val: 1 }, 
                    action: "advance_chain",
                    nextScene: { text: "å“‡ï¼è£¡é¢è£æ»¿äº†å¤ä»£é‡‘å¹£å’Œå¯¶çŸ³ï¼é‹æ°£å¤ªå¥½äº†ï¼", rewards: { gold: 100, tags: ['lucky_buff'] } },
                    failScene: { text: "æ˜¯å¯¶ç®±æ€ªï¼å®ƒç‹ ç‹ å’¬äº†ä½ çš„æ‰‹ä¸€å£ï¼Œä½ ç—›å¾—ç”©é–‹äº†å®ƒã€‚", rewards: { energy: -10 } }
                },
                { label: "å¤ªå¯ç–‘äº†ï¼Œç„¡è¦–", action: "advance_chain" }
            ]
        },
		{
            type: 'boss', id: 'univ_boss_shadow',
            // æ³¨æ„ï¼šé€™è£¡ä¸è¨­ reqTagï¼Œç¢ºä¿ä»»ä½•äººéƒ½èƒ½æŠ½åˆ°
            text: { zh: [
                "å†’éšªçš„çµ‚é»ï¼Œä¸€è‚¡å¼·å¤§çš„æƒ¡æ„æ“‹ä½äº†å»è·¯ã€‚",
                "é‚£æ˜¯ä¸€å€‹æ¨¡ç³Šçš„{enemy}ï¼Œå®ƒä¼¼ä¹æ˜¯ç”±ä½ ä¸€è·¯ä¸Šæ‰€æœ‰çš„ææ‡¼å‡èšè€Œæˆçš„ã€‚",
                "é¿ç„¡å¯é¿ï¼Œåªèƒ½èƒŒæ°´ä¸€æˆ°ï¼"
            ]},
            slots: ['enemy'], // æœƒè‡ªå‹•å¾åè©åº«éš¨æ©ŸæŠ½ä¸€å€‹æ•µäºº
            dialogue: [
                { speaker: "æ—ç™½", text: { zh: "å®ƒç™¼å‡ºäº†éœ‡è€³æ¬²è¾çš„å’†å“®ï¼Œæº–å‚™ç™¼å‹•æœ€å¾Œçš„æ”»æ“Šï¼" } }
            ],
            options: [
                { 
                    label: "æ­£é¢è¿æ“Šï¼(STRæª¢å®š)", 
                    check: { stat: 'STR', val: 5 }, 
                    action: "finish_chain",
                    nextScene: { text: "ä½ ç”¨ç›¡å…¨åŠ›æ“Šå€’äº†å®ƒï¼å‹åˆ©å±¬æ–¼ä½ ï¼", rewards: { exp: 500, gold: 100 } },
                    failScene: { text: "ä½ é›–ç„¶æ“Šé€€äº†å®ƒï¼Œä½†ä¹Ÿå—äº†é‡å‚·...", rewards: { exp: 200, energy: -20 } }
                },
                { 
                    label: "å°‹æ‰¾å¼±é»çªè¥² (INTæª¢å®š)", 
                    check: { stat: 'INT', val: 5 }, 
                    action: "finish_chain",
                    nextScene: { text: "ä½ ç™¼ç¾äº†å®ƒçš„ç ´ç¶»ï¼Œä¸€æ“Šå¿…æ®ºï¼", rewards: { exp: 600, gold: 150 } },
                    failScene: { text: "ä½ åˆ¤æ–·å¤±èª¤ï¼Œéšªäº›å–ªå‘½...", rewards: { exp: 200, energy: -20 } }
                }
            ]
        },
		{
            type: 'setup', id: 'univ_setup_tavern',
            text: { zh: [
                "ä½ æ¨é–‹äº†é…’é¤¨æ²ˆé‡çš„æ©¡æœ¨é–€ï¼Œå–§é¬§çš„è²éŸ³æ’²é¢è€Œä¾†ã€‚",
                "å†’éšªè€…å€‘åœ¨æ­¤äº¤æ›è‘—æƒ…å ±èˆ‡æ•…äº‹ï¼Œè€Œä½ æ­£åœ¨å°‹æ‰¾ä¸‹ä¸€å€‹å§”è¨—ã€‚",
                "é…’ä¿æ“¦è‘—æ¯å­ï¼Œçœ¼ç¥ç¤ºæ„ç‰†è§’æœ‰ä¸€å€‹ç¥ç¥•çš„äººåœ¨ç­‰ä½ ã€‚"
            ]},
            slots: ['location_base'], 
            options: [
                { 
                    label: "èµ°å‘è§’è½çš„ç¥ç¥•äºº (é€²å…¥æ‡¸ç–‘ç·š)", 
                    action: "advance_chain", 
                    rewards: { tags: ['case_started'] } // é›–ç„¶æ˜¯é€šç”¨é–‹é ­ï¼Œä½†ä¹Ÿå¯ä»¥å¼•å°å»æ‡¸ç–‘ç·š
                },
                { 
                    label: "å‘é…’ä¿æ‰“è½æ¶ˆæ¯ (é€²å…¥å†’éšªç·š)", 
                    action: "advance_chain",
                    rewards: { tags: ['style_selected'] }
                }
            ]
        },
        {
            type: 'setup', id: 'univ_setup_crossroad',
            text: { zh: [
                "ä½ ç«™åœ¨å‘½é‹çš„åå­—è·¯å£ï¼Œæ¿ƒéœ§é®è”½äº†å‰æ–¹çš„é“è·¯ã€‚",
                "è·¯æ¨™ä¸Šçš„å­—è·¡å·²ç¶“æ¨¡ç³Šä¸æ¸…ï¼Œä½†ä½ å¿…é ˆåšå‡ºé¸æ“‡ã€‚",
                "å·¦é‚Šå‚³ä¾†äº†é‡ç¸çš„ä½å¼ï¼Œå³é‚Šå‰‡ç€°æ¼«è‘—ä¸€è‚¡è©­ç•°çš„èŠ±é¦™ã€‚"
            ]},
            options: [
                { 
                    label: "å¾€å·¦é‚Šèµ° (æˆ°é¬¥)", 
                    action: "advance_chain", 
                    rewards: { tags: ['style_combat'], varOps: [{key:'hp', val:100, op:'set'}] } 
                },
                { 
                    label: "å¾€å³é‚Šèµ° (æ¢ç´¢)", 
                    action: "advance_chain", 
                    rewards: { tags: ['clue_found'] }
                }
            ]
        },
    ]
};
/* js/story_data/story_raising.js */
(function() {
    // 1. å–å¾—æ ¸å¿ƒæ´»é ç°¿
    const DB = window.FragmentDB;
    if (!DB) {
        console.error("âŒ éŒ¯èª¤ï¼šæ‰¾ä¸åˆ° FragmentDBï¼Œè«‹ç¢ºèª story_data_core.js å·²å„ªå…ˆè¼‰å…¥ã€‚");
        return;
    }

    // 2. è¿½åŠ åŠ‡æœ¬ (Templates)
    DB.templates.push(
	// ============================================================
        // [BLOCK E] ğŸŒ± æ˜æ˜Ÿæ¨æ‰‹/é¤Šæˆæµ (The Mentor)
        // ============================================================
        {
            type: 'raise_meet', id: 'raise_start_select',
            text: { zh: [ "é€™æ˜¯ä¸€å€‹{adj_env_vibe}æ—¥å­ï¼Œä½ åœ¨{noun_location_building}çš„è§’è½ç™¼ç¾äº†é‚£å€‹ç¨ç‰¹çš„å­˜åœ¨ã€‚", "é‚£æ˜¯ä¸€ä½{adj_npc_trait}{trainee}ï¼Œé›–ç„¶ç¾åœ¨é‚„å¾ˆå¼±å°ï¼Œä½†ä½ å¾å°æ–¹çš„çœ¼ç¥ä¸­çœ‹åˆ°äº†ç„¡é™çš„æ½›åŠ›ã€‚", "å‘½é‹å°‡ä½ å€‘è¯ç¹«åœ¨äº†ä¸€èµ·ï¼Œä½ æ±ºå®šæˆç‚ºå°æ–¹çš„..." ]},
            slots: ['adj_env_vibe', 'noun_location_building', 'adj_npc_trait', 'trainee'],
            options: [
                { label: "åš´å²çš„å°å¸« (æ³¨é‡å¯¦åŠ›)", action: "advance_chain", rewards: { tags: ['style_power'], varOps: [{key:'str', val:30, op:'set'}, {key:'chr', val:10, op:'set'}] }, nextScene: { text: "ä½ èµ°ä¸Šå‰å»ï¼Œä¼¸å‡ºäº†æ‰‹ã€‚ã€Œæƒ³è®Šå¼·å—ï¼Ÿé‚£å°±è·Ÿè‘—æˆ‘ã€‚ã€å°æ–¹çŒ¶è±«ç‰‡åˆ»å¾Œï¼Œç·Šç·Šæ¡ä½äº†ä½ çš„æ‰‹ã€‚" } },
                { label: "æº«æŸ”çš„å®ˆè­·è€… (æ³¨é‡é­…åŠ›)", action: "advance_chain", rewards: { tags: ['style_charm'], varOps: [{key:'str', val:10, op:'set'}, {key:'chr', val:30, op:'set'}] }, nextScene: { text: "ä½ æº«æŸ”åœ°ç¬‘äº†ç¬‘ï¼Œçµ¦äºˆäº†å°æ–¹æœ€éœ€è¦çš„æº«æš–ã€‚å¾é‚£ä¸€åˆ»èµ·ï¼Œä½ æˆç‚ºäº†å°æ–¹æœ€ä¾è³´çš„æ¸¯ç£ã€‚" } }
            ]
        },
        {
            type: 'raise_train', id: 'raise_train_day',
            text: { zh: [ "æ™‚å…‰é£›é€ï¼Œ{trainee}åœ¨ä½ çš„æŒ‡å°ä¸‹é£›é€Ÿæˆé•·ã€‚", "ä»Šå¤©æ˜¯ä¸€å€‹é—œéµçš„è¨“ç·´æ—¥ï¼Œä½ çœ‹è‘—å°æ–¹{adv_manner}ç·´ç¿’è‘—ã€‚", "ç¾åœ¨æ­£æ˜¯çªç ´ç“¶é ¸çš„å¥½æ©Ÿæœƒï¼Œä½ æ±ºå®šå®‰æ’..." ]},
            slots: ['trainee', 'adv_manner'],
            options: [
                { label: "é­”é¬¼ç‰¹è¨“ (é«”èƒ½/æˆ°é¬¥)", action: "advance_chain", rewards: { varOps: [{key:'str', val:20, op:'+'}, {key:'stress', val:15, op:'+'}] }, nextScene: { text: "æ±—æ°´ï¼ˆæˆ–è¡€æ±—ï¼‰æ®ç‘åœ¨è¨“ç·´å ´ä¸Šã€‚é›–ç„¶éç¨‹ç—›è‹¦ï¼Œä½†å°æ–¹çš„çœ¼ç¥è¶Šä¾†è¶ŠéŠ³åˆ©ï¼Œå¯¦åŠ›å¤§å¹…æå‡ã€‚" } },
                { label: "è—è¡“è–°é™¶ (è¡¨æ¼”/éˆæ€§)", action: "advance_chain", rewards: { varOps: [{key:'chr', val:20, op:'+'}, {key:'gold', val:-50, op:'+'}] }, nextScene: { text: "å„ªé›…çš„èˆ‰æ­¢èˆ‡æ°£è³ªé€æ¼¸æˆå½¢ã€‚å°æ–¹çš„ä¸€èˆ‰ä¸€å‹•éƒ½é–‹å§‹æ•£ç™¼è‘—è¿·äººçš„é­…åŠ›ï¼Œå¸å¼•äº†å‘¨åœçš„ç›®å…‰ã€‚" } },
                { label: "æ”¾é¬†ä¼‘æ¯ (æ¶ˆé™¤å£“åŠ›)", action: "advance_chain", rewards: { varOps: [{key:'stress', val:30, op:'-'}] }, nextScene: { text: "å‹é€¸çµåˆæ˜¯å¿…è¦çš„ã€‚çœ‹è‘—{trainee}é–‹å¿ƒçš„ç¡è‡‰ï¼ˆæˆ–ç¬‘è‡‰ï¼‰ï¼Œä½ æ„Ÿåˆ°ä¸€é™£æ¬£æ…°ã€‚" } }
            ]
        },
        {
            type: 'raise_debut', id: 'raise_event_show',
            text: { zh: [ "{trainee}è¿ä¾†äº†ç¬¬ä¸€æ¬¡å…¬é–‹å±•ç¤ºçš„æ©Ÿæœƒâ€”â€”åœ¨{noun_location_room}èˆ‰è¡Œçš„é¸æ‹”è³½ã€‚", "å°ä¸‹ï¼ˆæˆ–å ´é‚Šï¼‰åæ»¿äº†æŒ‘å‰”çš„è§€çœ¾å’Œè©•å¯©ã€‚ä½ çš„å‹æ•µ{rival}ä¹Ÿå¸¶è‘—ä»–åŸ¹è‚²çš„ç²¾è‹±å‡ºç¾äº†ã€‚", "{rival}å†·ç¬‘è‘—èªªï¼šã€Œé€™ç¨®æ°´æº–ä¹Ÿæ•¢å‡ºä¾†ä¸Ÿäººç¾çœ¼ï¼Ÿã€" ]},
            slots: ['trainee', 'noun_location_room', 'rival'],
            options: [
                { label: "å±•ç¤ºè¯éº—çš„æŠ€å·§ (æª¢å®šé­…åŠ›)", check: { stat: 'CHR', val: 50 }, action: "advance_chain", nextScene: { text: "å…¨å ´éƒ½è¢«é‚£é©šäººçš„ç¾æ„Ÿå¾æœäº†ï¼æŒè²é›·å‹•ï¼Œ{rival}çš„è‡‰è‰²è®Šå¾—éµé’ã€‚", rewards: { gold: 300, tags: ['fame_mid'] } }, failScene: { text: "æˆ–è¨±æ˜¯å¤ªç·Šå¼µäº†ï¼Œè¡¨æ¼”ä¸­å‡ºç¾äº†ä¸€å€‹å°å¤±èª¤ã€‚é›–ç„¶è§€çœ¾çµ¦äºˆäº†é¼“å‹µï¼Œä½†é›¢å®Œç¾é‚„å·®ä¸€é»ã€‚", rewards: { varOps: [{key:'stress', val:10, op:'+'}] } } },
                { label: "å±•ç¤ºå£“å€’æ€§çš„åŠ›é‡ (æª¢å®šå¯¦åŠ›)", check: { stat: 'STR', val: 50 }, action: "advance_chain", nextScene: { text: "è½Ÿï¼éœ‡æ’¼çš„å¯¦åŠ›å±•ç¤ºè®“å…¨å ´é´‰é›€ç„¡è²ï¼Œéš¨å¾Œçˆ†ç™¼å‡ºé©šå˜†çš„æ­¡å‘¼ã€‚é€™æ˜¯å¼·è€…çš„è­‰æ˜ï¼", rewards: { gold: 300, tags: ['fame_mid'] } } }
            ]
        },
        {
            type: 'raise_climax', id: 'raise_final_battle', reqTag: 'fame_mid', 
            text: { zh: [ "æ±ºæˆ°ä¹‹æ—¥çµ‚æ–¼ä¾†è‡¨ã€‚é€™ä¸åƒ…æ˜¯{trainee}çš„èˆå°ï¼Œä¹Ÿæ˜¯æª¢é©—ä½ æ•™è‚²æˆæœçš„æ™‚åˆ»ã€‚", "ç«™åœ¨å·”å³°çš„å°æ‰‹å¼·å¤§å¾—ä»¤äººçª’æ¯ï¼Œä½†ä½ çš„{trainee}å·²ç¶“ä¸å†æ˜¯ç•¶åˆé‚£å€‹å¼±å°çš„å­˜åœ¨äº†ã€‚", "åœ¨æ­¤åˆ»ï¼Œä½ æƒ³å°ä»–èªª/ç‰ æœ€å¾Œä¸€å¥è©±æ˜¯..." ]},
            slots: ['trainee'],
            options: [{ label: "ã€Œå»å§ï¼Œè®“ä¸–ç•Œçœ‹åˆ°ä½ çš„å…‰èŠ’ï¼ã€", action: "advance_chain", rewards: { varOps: [{key:'chr', val:10, op:'+'}, {key:'str', val:10, op:'+'}] }, nextScene: { text: "{trainee}å›é ­çœ‹äº†ä½ ä¸€çœ¼ï¼Œçœ¼ç¥ä¸­å……æ»¿äº†ä¿¡ä»»ã€‚ç„¶å¾Œï¼Œæ¯…ç„¶æ±ºç„¶åœ°è¸ä¸Šäº†æ±ºæˆ°çš„èˆå°ã€‚" } }]
        },
        {
            type: 'raise_ending', id: 'raise_end_result',
            text: { zh: [ "å¡µåŸƒè½å®šã€‚å‚³èªªå·²ç¶“èª•ç”Ÿã€‚", "ä½ çœ‹è‘—çœ¼å‰é€™å€‹å…‰èŠ’è¬ä¸ˆçš„å­˜åœ¨ï¼Œå›æƒ³èµ·æœ€åˆåœ¨{noun_location_building}ç›¸é‡çš„é‚£ä¸€åˆ»ã€‚", "é€™æ®µæ—…ç¨‹ï¼Œçµ‚æ–¼ç•«ä¸Šäº†å¥é»ã€‚" ]},
            slots: ['noun_location_building'],
            options: [
                { label: "è¦‹è­‰ï¼šè‡³é«˜å¶åƒ/å¥³ç¥ (CHR > 100)", condition: { vars: [{key:'chr', val:100, op:'>='}] }, style: "primary", action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šä¸–ç•Œçš„å¯µå…’ã€‘\n{trainee}æˆç‚ºäº†è¢«ä¸–äººå‚³é Œçš„å¶åƒï¼ˆæˆ–ç¥ç¸ï¼‰ã€‚ç„¡è«–èµ°åˆ°å“ªè£¡ï¼Œéƒ½ä¼´éš¨è‘—é®®èŠ±èˆ‡æŒè²ã€‚\nè€Œä½ ï¼Œæ˜¯é€ å°±é€™å¥‡è¹Ÿçš„å‚³å¥‡å°å¸«ã€‚", rewards: { exp: 2000, title: "é‡‘ç‰Œè£½ä½œäºº" } } },
                { label: "è¦‹è­‰ï¼šæœ€å¼·æˆ°ç¥/ç¸ç‹ (STR > 100)", condition: { vars: [{key:'str', val:100, op:'>='}] }, style: "danger", action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šé ‚é»çš„éœ¸è€…ã€‘\nä»¥çµ•å°çš„åŠ›é‡å›è‡¨å¤©ä¸‹ï¼{trainee}çš„åå­—æˆç‚ºäº†åŠ›é‡çš„ä»£åè©ã€‚\né€™ä»½æ¦®è€€ï¼Œæœ‰ä¸€åŠå±¬æ–¼åœ¨èƒŒå¾Œé»˜é»˜æ”¯æŒçš„ä½ ã€‚", rewards: { exp: 2000, title: "ç‹è€…ä¹‹å¸«" } } },
                { label: "å›æ­¸å¹³å‡¡çš„å¹¸ç¦", action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šç›¸ä¼´çš„æ—…é€”ã€‘\né›–ç„¶æ²’æœ‰æˆç‚ºå‚³èªªï¼Œä½†ä½ å€‘æ”¶ç©«äº†å½¼æ­¤çš„ä¿¡ä»»ã€‚ä½ å€‘æ±ºå®šé›¢é–‹èšå…‰ç‡ˆï¼Œå»å°‹æ‰¾å±¬æ–¼è‡ªå·±çš„å¹³éœç”Ÿæ´»ã€‚", rewards: { exp: 800 } } }
            ]
        },
		// 1. åˆé‡/æ‹›å‹Ÿ (raise_meet)
{
    type: 'raise_meet',
    id: 'raise_meet_normal',
    text: { zh: [
        "é€™æ˜¯ä¸€å€‹å‘½é‹èˆ¬çš„ç›¸é‡ã€‚",
        "ä½ åœ¨äººç¾¤ä¸­ä¸€çœ¼å°±çœ‹åˆ°äº†{trainee}ã€‚é›–ç„¶ç¾åœ¨é‚„é»˜é»˜ç„¡èï¼Œä½†ä½ å¾é‚£é›™çœ¼ç›è£¡çœ‹åˆ°äº†æ½›åŠ›ã€‚",
        "ã€Œä½ æ˜¯èªª... ä½ èƒ½è®“æˆ‘æˆç‚ºæœ€å¼·çš„ï¼Ÿã€{trainee}æ‡·ç–‘åœ°çœ‹è‘—ä½ ã€‚"
    ]},
    slots: ['trainee'], // ç¢ºä¿å¡«å…¥é¤Šæˆå°è±¡åå­—
    options: [
        { 
            label: "å±•ç¾ä½ çš„å°ˆæ¥­ (CHRæª¢å®š)", 
            check: { stat: 'CHR', val: 5 }, 
            action: "advance_chain", 
            nextScene: { text: "ä½ çš„ä¸€ç•ªè©±æ‰“å‹•äº†å°æ–¹ã€‚\nã€Œå¥½å§ï¼Œæ•™ç·´ï¼Œè«‹å¤šæŒ‡æ•™ï¼ã€" },
            failScene: { text: "å°æ–¹ä¼¼ä¹ä¸å¤ªä¿¡ä»»ä½ ï¼Œä½†é‚„æ˜¯å‹‰å¼·ç­”æ‡‰è©¦è©¦çœ‹ã€‚" }
        },
        { label: "ç”¨ç†±æƒ…æ„ŸæŸ“å°æ–¹", action: "advance_chain", rewards: { varOps: [{key:'trust', val:5, op:'+'}] } }
    ]
},

// 2. è¨“ç·´æ—¥å¸¸ (raise_train)
{
    type: 'raise_train',
    id: 'raise_train_hard',
    text: { zh: [
        "ä»Šå¤©çš„è¨“ç·´æ¸…å–®éå¸¸é­”é¬¼ã€‚",
        "{trainee}å·²ç¶“ç´¯å¾—æ°£å–˜ååï¼Œæ±—æ°´æµ¸æ¿•äº†è¡£èƒŒã€‚",
        "ã€Œæ•™ç·´... æˆ‘çœŸçš„ä¸è¡Œäº†...ã€"
    ]},
    slots: ['trainee'],
    options: [
        { 
            label: "åš´å²æ–¥è²¬ï¼šå …æŒä¸‹å»ï¼", 
            action: "advance_chain", 
            rewards: { varOps: [{key:'stress', val:10, op:'+'}] }, // å£“åŠ›ä¸Šå‡
            nextScene: { text: "{trainee}å’¬è‘—ç‰™ç«™äº†èµ·ä¾†ï¼Œçªç ´äº†æ¥µé™ï¼(èƒ½åŠ›å¤§å¹…æå‡)", onEnter: { exp: 50 } } 
        },
        { 
            label: "æº«æŸ”é¼“å‹µï¼šä¼‘æ¯ä¸€ä¸‹å§", 
            action: "advance_chain", 
            rewards: { varOps: [{key:'stress', val:10, op:'-'}] }, // å£“åŠ›ä¸‹é™
            nextScene: { text: "{trainee}æ„Ÿæ¿€åœ°çœ‹è‘—ä½ ã€‚é›–ç„¶é€²åº¦æ…¢äº†é»ï¼Œä½†èº«å¿ƒæ›´å¥åº·äº†ã€‚" } 
        }
    ]
},

// 3. åˆæ¬¡ç™»å°/å‡ºé“ (raise_debut)
{
    type: 'raise_debut',
    id: 'raise_debut_show',
    text: { zh: [
        "çµ‚æ–¼åˆ°äº†æª¢é©—æˆæœçš„æ™‚å€™ã€‚",
        "èˆå°ä¸‹çš„è§€çœ¾ä¸¦ä¸å¤šï¼Œä½†é€™æ˜¯{trainee}çš„ç¬¬ä¸€æ¬¡æ­£å¼äº®ç›¸ã€‚",
        "ä½ ç«™åœ¨å¾Œå°ï¼Œæ¯”å°ä¸Šçš„äººé‚„è¦ç·Šå¼µã€‚"
    ]},
    slots: ['trainee'],
    options: [
        { 
            label: "è§€å¯Ÿè§€çœ¾åæ‡‰", 
            action: "advance_chain", 
            nextScene: { text: "æ¼”å‡ºé›–ç„¶æœ‰äº›é’æ¾€ï¼Œä½†æŒè²æ¯”é æœŸçš„ç†±çƒˆï¼é€™æ˜¯ä¸€å€‹å¥½çš„é–‹å§‹ã€‚" }
        },
        { 
            label: "æ‡‰è®Šçªç™¼ç‹€æ³ (INTæª¢å®š)", 
            check: { stat: 'INT', val: 6 }, 
            action: "advance_chain", 
            nextScene: { text: "ä½ åŠæ™‚åŒ–è§£äº†ä¸€å€‹èˆå°äº‹æ•…ï¼Œæ¼”å‡ºå®Œç¾è½å¹•ï¼" }
        }
    ]
},

// 4. çµå±€ (raise_ending) - [é—œéµä¿®å¾©] é€™æ˜¯ä½ ç¼ºå°‘çš„è‡´å‘½æ‹¼åœ–
{
    type: 'raise_ending',
    id: 'raise_ending_success',
    text: { zh: [
        "ç¶“éé€™æ®µæ™‚é–“çš„åŠªåŠ›ï¼Œ{trainee}å·²ç¶“è„«èƒæ›éª¨ã€‚",
        "çœ‹è‘—é‚£è‡ªä¿¡çš„èº«å½±ï¼Œä½ çŸ¥é“ä½ çš„ä»»å‹™å·²ç¶“å®Œæˆäº†ã€‚",
        "é€™æ®µå‚³å¥‡çš„æ—…ç¨‹ï¼Œå°‡æœƒè¢«æ°¸é éŠ˜è¨˜ã€‚"
    ]},
    slots: ['trainee'],
    options: [
        { 
            label: "å«æ·šå‘Šåˆ¥", 
            action: "finish_chain", 
            nextScene: { text: "ã€Œè¬è¬ä½ ï¼Œæ•™ç·´ï¼æˆ‘æ°¸é ä¸æœƒå¿˜è¨˜ä½ ï¼ã€\n\nã€é¤Šæˆçµå±€ï¼šæ˜Ÿå…‰å¤§é“ã€‘", rewards: { title: "é‡‘ç‰Œæ•™ç·´", exp: 1000 } } 
        },
        { 
            label: "ç¹¼çºŒæ“”ä»»ç¶“ç´€äºº", 
            action: "finish_chain", 
            nextScene: { text: "ä½ å€‘çš„æ­æª”é—œä¿‚é‚„æœƒç¹¼çºŒä¸‹å»ï¼ŒæŒ‘æˆ°æ›´é«˜çš„å·”å³°ï¼\n\nã€é¤Šæˆçµå±€ï¼šæœ€ä½³æ‹æª”ã€‘", rewards: { gold: 500 } } 
        }
    ]
},
    );

    console.log("ğŸ•µï¸â€â™‚ï¸ åŠ‡æœ¬å·²è¼‰å…¥");
})();
/* js/story_data/story_adventure.js */
(function() {
    const DB = window.FragmentDB;
    if (!DB) {
        console.error("âŒ éŒ¯èª¤ï¼šæ‰¾ä¸åˆ° FragmentDBï¼Œè«‹ç¢ºèª story_data_core.js å·²å„ªå…ˆè¼‰å…¥ã€‚");
        return;
    }

    DB.templates.push(
        // ============================================================
        // [BLOCK C] âš”ï¸ ç•°ä¸–ç•Œæˆ°è¨˜ (Adventure Chronicles)
        // ============================================================
        {
            type: 'setup', id: 'adventure_start_class',
            // ä½¿ç”¨ memory ä¸­çš„ noun_location_building èˆ‡ noun_monster ç¢ºä¿å…¨å±€ä¸€è‡´
            text: { zh: [ "å¼·çƒˆçš„æšˆçœ©æ„Ÿé€€å»å¾Œï¼Œä½ ç™¼ç¾è‡ªå·±èº«è™•æ–¼ä¸€åº§{noun_location_building}ä¹‹ä¸­ã€‚", "å¤©ç©ºä¸­æ‡¸æ›è‘—ç ´ç¢çš„æœˆäº®ï¼Œé è™•å‚³ä¾†äº†{noun_monster}çš„å˜¶å¼è²ã€‚", "ä½ ä½é ­çœ‹äº†çœ‹è‡ªå·±çš„é›™æ‰‹ï¼Œæ„è­˜åˆ°è‡ªå·±å¿…é ˆä¾é æ‰‹ä¸­çš„æ­¦å™¨æ´»ä¸‹å»ã€‚" ]},
            options: [
                { label: "æ¡ç·Šé‡åŠ (æˆ°å£«è·¯ç·š)", action: "advance_chain", rewards: { tags: ['class_warrior'], varOps: [{key:'hp', val:120, op:'set'}, {key:'str', val:10, op:'set'}] }, nextScene: { text: "æ²‰é‡çš„åŠèº«çµ¦äº†ä½ å®‰å…¨æ„Ÿã€‚ç„¡è«–å‰æ–¹æœ‰ä»€éº¼ï¼Œä½ éƒ½å°‡ä¸€åˆ€å…©æ–·ã€‚" } },
                { label: "è© å”±å’’æ–‡ (æ³•å¸«è·¯ç·š)", action: "advance_chain", rewards: { tags: ['class_mage'], varOps: [{key:'mp', val:100, op:'set'}, {key:'int', val:10, op:'set'}] }, nextScene: { text: "å…ƒç´ åœ¨ä½ æŒ‡å°–è·³å‹•ã€‚çŸ¥è­˜å°±æ˜¯åŠ›é‡ï¼Œè€Œä½ æŒæ¡è‘—æ¯€æ»…çš„çŸ¥è­˜ã€‚" } },
                { label: "æª¢æŸ¥çŸ­åˆ€ (åˆºå®¢è·¯ç·š)", action: "advance_chain", rewards: { tags: ['class_rogue'], varOps: [{key:'agi', val:10, op:'set'}] }, nextScene: { text: "ä½ å£“ä½äº†èº«å½¢ï¼Œèˆ‡é™°å½±èç‚ºä¸€é«”ã€‚åœ¨è¢«ç™¼ç¾ä¹‹å‰ï¼Œæ•µäººå°±å·²ç¶“æ­»äº†ã€‚" } }
            ]
        },
        {
            type: 'event_battle', id: 'adventure_battle_ambush',
            // ä½¿ç”¨ atom_time (å¦‚"ç¬é–“"/"ç·©æ…¢") èˆ‡ atom_manner (å¦‚"å¼µç‰™èˆçˆª") å¢åŠ ç•«é¢æ„Ÿ
            text: { zh: [ "è‰å¢ä¸­å‚³ä¾†äº†æ€¥ä¿ƒçš„æ²™æ²™è²ã€‚ä½ {atom_time}è½‰éèº«ï¼Œæ­£å¥½è¿é¢æ’ä¸Šäº†ä¸€éš»{noun_monster}ï¼", "å°æ–¹{atom_manner}åœ°å¼µé–‹äº†åˆ©çˆªï¼Œçœ¼è£¡é–ƒçˆè‘—ä»¤äººä¸å®‰çš„ç´…å…‰ï¼Œé¡¯ç„¶å·²ç¶“é£¢é¤“é›£è€ã€‚", "é¿ç„¡å¯é¿ï¼Œå”¯æœ‰æ­»æˆ°ã€‚" ]},
            options: [
                { label: "æ­£é¢è¿æ“Š (STRæª¢å®š)", check: { stat: 'STR', val: 5 }, action: "advance_chain", nextScene: { text: "ä½ ç™¼å‡ºæ€’å¼ï¼Œæ­¦å™¨å¸¶è‘—ç ´é¢¨è²é‡é‡æ“Šä¸­äº†å°æ–¹ï¼æ€ªç‰©ç™¼å‡ºå“€åšï¼Œå€’åœ¨åœ°ä¸ŠæŠ½æè‘—ã€‚" }, failScene: { text: "ä½ çš„åŠ›é‡è¼¸çµ¦äº†å°æ–¹çš„é‡æ€§ã€‚å°æ–¹å°‡ä½ æ’²å€’åœ¨åœ°ï¼Œåˆ©çˆªåœ¨ä½ èº«ä¸Šç•™ä¸‹äº†æ·±å¯è¦‹éª¨çš„å‚·ç—•ã€‚", rewards: { energy: -20 } } },
                { label: "å°‹æ‰¾ç ´ç¶» (INTæª¢å®š)", check: { stat: 'INT', val: 5 }, action: "advance_chain", nextScene: { text: "ä½ å†·éœåœ°è§€å¯Ÿå°æ–¹çš„å‹•ä½œï¼Œåœ¨å°æ–¹æ’²éä¾†çš„ç¬é–“å´èº«é–ƒéï¼Œä¸¦ç²¾æº–åœ°åˆºå…¥äº†å°æ–¹çš„è¦å®³ã€‚" }, failScene: { text: "å°æ–¹çš„å‹•ä½œæ¯”ä½ é æƒ³çš„æ›´å¿«ï¼ä½ åˆ¤æ–·å¤±èª¤ï¼Œåªèƒ½ç‹¼ç‹½åœ°åœ¨åœ°ä¸Šæ‰“æ»¾èº²é¿æ”»æ“Šã€‚", rewards: { energy: -15 } } }
            ]
        },
        {
            type: 'event_battle', id: 'adventure_battle_magic', reqTag: 'class_mage', 
            text: { zh: [ "å‰æ–¹çš„é“è·¯è¢«ä¸€ç¾¤{noun_monster}æ“‹ä½äº†ã€‚ç‰ å€‘ä¼¼ä¹å°é­”æ³•æ³¢å‹•éå¸¸æ•æ„Ÿã€‚", "ä½ æ„Ÿè¦ºåˆ°å‘¨åœçš„å…ƒç´ æ­£åœ¨èºå‹•ï¼Œé€™æ˜¯ä¸€å€‹é‡‹æ”¾å¤§å‹é­”æ³•çš„çµ•ä½³æ©Ÿæœƒã€‚" ]},
            options: [{ label: "è© å”±ã€Œçˆ†è£‚ç«çƒã€ï¼", action: "advance_chain", rewards: { varOps: [{key:'mp', val:20, op:'-'}] }, nextScene: { text: "å·¨å¤§çš„ç«çƒåœ¨æ€ªç‰©ç¾¤ä¸­ç‚¸è£‚ï¼ç©ºæ°£ä¸­å……æ»¿äº†ç„¦ç³Šå‘³ï¼Œæ•µäººç¬é–“åŒ–ç‚ºäº†ç°ç‡¼ã€‚" } }]
        },
        {
            type: 'event_explore', id: 'adventure_explore_ruin',
            // å®Œç¾æ‡‰ç”¨ sentence_env_vibe (ä¾‹å¦‚ï¼šç©ºæ°£ä¸­ç€°æ¼«è‘—éµé½å‘³ / é è™•ä¸æ™‚å‚³ä¾†æ°´æ»´è²)
            text: { zh: [ "ä½ ç™¼ç¾äº†ä¸€åº§è¢«è—¤è”“è¦†è“‹çš„å¤ä»£éºè·¡ã€‚{sentence_env_vibe}ã€‚", "åœ¨æ–·è£‚çš„çŸ³æŸ±æ—ï¼Œèººè‘—ä¸€å…·ç™½éª¨ï¼Œä»–çš„æ‰‹è£¡é‚„æ­»æ­»æŠ“è‘—ä¸€æŠŠ{noun_item_weapon}ã€‚", "é‚£æ˜¯æŸç¨®ä¿¡ç‰©ï¼Ÿé‚„æ˜¯å¸¶ä¾†ä¸å¹¸çš„è©›å’’ä¹‹ç‰©ï¼Ÿ" ]},
            options: [
                { label: "æ’¿èµ·ç‰©å“", action: "advance_chain", rewards: { tags: ['item_found'], gold: 50 }, nextScene: { text: "ä½ æ“¦å»äº†ä¸Šé¢çš„ç°å¡µã€‚é›–ç„¶å¹´ä»£ä¹…é ï¼Œä½†å®ƒä¾ç„¶æ•£ç™¼è‘—å¾®å¼±çš„é­”åŠ›æ³¢å‹•ã€‚" } },
                { label: "é›™æ‰‹åˆåï¼Œè½‰èº«é›¢é–‹", action: "advance_chain", rewards: { varOps: [{key:'sanity', val:10, op:'+'}] } }
            ]
        },
        {
            type: 'event_explore', id: 'adventure_explore_trap',
            text: { zh: [ "ä½ æ­£{atom_time}èµ°åœ¨ç‹¹çª„çš„é€šé“ä¸­ï¼Œè…³ä¸‹çš„åœ°ç£šçªç„¶ä¸‹é™·ï¼", "ã€Œå–€åš“ã€ä¸€è²ï¼Œæ©Ÿé—œè¢«è§¸ç™¼äº†ã€‚å…©å´çš„ç‰†å£é–‹å§‹å™´å°„å‡ºæ¯’ç®­ã€‚", "é€™æ˜¯ä¸€å€‹è‡´å‘½çš„é™·é˜±ï¼" ]},
            options: [{ label: "é åæ‡‰é–ƒé¿ (AGIæª¢å®š)", check: { stat: 'AGI', val: 5 }, action: "advance_chain", nextScene: { text: "ä½ çš„èº«é«”æ¯”æ„è­˜æ›´å¿«åšå‡ºäº†åæ‡‰ï¼ä½ åœ¨ç®­é›¨ä¸­ç©¿æ¢­ï¼Œæ¯«é«®ç„¡å‚·åœ°è½åœ¨äº†å®‰å…¨å€ã€‚" }, failScene: { text: "ä½ ç›¡åŠ›èº²é¿äº†ï¼Œä½†ä¸€æ”¯æ¯’ç®­é‚„æ˜¯æ“¦å‚·äº†ä½ çš„æ‰‹è‡‚ã€‚å‚·å£å‚³ä¾†äº†ä¸€é™£éº»ç—ºæ„Ÿã€‚", rewards: { energy: -30 } } }]
        },
        {
            type: 'boss', id: 'adventure_boss_dragon',
            text: { zh: [ "å¤§åœ°çš„éœ‡å‹•è¶Šä¾†è¶ŠåŠ‡çƒˆã€‚åœ¨{noun_location_building}çš„æœ€æ·±è™•ï¼Œä¸€é›™å·¨å¤§çš„çœ¼ç›çœé–‹äº†ã€‚", "é‚£æ˜¯å‚³èªªä¸­çš„ç½å„â€”â€”{noun_monster}ï¼ˆè®Šç•°é«”ï¼‰ï¼", "å°æ–¹{atom_manner}åœ°ç™¼å‡ºäº†éœ‡è€³æ¬²è¾çš„å’†å“®ï¼Œå¼·å¤§çš„é¢¨å£“å¹¾ä¹è®“ä½ ç«™ç«‹ä¸ç©©ã€‚", "é€™å°±æ˜¯æ—…é€”çš„çµ‚é»å—ï¼Ÿé‚„æ˜¯æˆç‚ºå‚³èªªçš„èµ·é»ï¼Ÿ" ]},
            options: [
                { label: "æ‹”åŠï¼Œæ­£é¢ç¡¬å‰›ï¼(æˆ°å£«æª¢å®š)", condition: { tags: ['class_warrior'] }, style: "danger", check: { stat: 'STR', val: 8 }, action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šå± é¾è‹±é›„ã€‘\nä½ ç‡ƒç‡’äº†æœ€å¾Œçš„ç”Ÿå‘½åŠ›ï¼Œå°‡åŠé€å…¥äº†æ€ªç‰©çš„å¿ƒè‡Ÿã€‚ä½ çš„åå­—å°‡è¢«åŸéŠè©©äººæ°¸é å‚³å”±ã€‚", rewards: { exp: 2000, title: "å‚³èªªå‹‡è€…" } }, failScene: { text: "ã€çµå±€ï¼šç„¡åçš„å±éª¸ã€‘\nå¯¦åŠ›çš„å·®è·æ˜¯çµ•æœ›çš„ã€‚ä½ çš„æ­¦å™¨æŠ˜æ–·äº†ï¼Œè¦–é‡é€æ¼¸è¢«é»‘æš—åæ²’...", rewards: { exp: 500 } } },
                { label: "é‡‹æ”¾ç¦å’’å¤©é›·ï¼(æ³•å¸«æª¢å®š)", condition: { tags: ['class_mage'] }, style: "danger", check: { stat: 'INT', val: 8 }, action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šå¤§é­”å°å¸«ã€‘\næ¯€æ»…çš„é›·éœ†è²«ç©¿äº†æ€ªç‰©çš„èº«è»€ï¼ç„¦é»‘çš„å·¨ç¸å€’ä¸‹ï¼Œè€Œä½ æˆç‚ºäº†é­”æ³•å²ä¸Šçš„å‚³å¥‡ã€‚", rewards: { exp: 2000, title: "å‚³å¥‡é­”å°" } }, failScene: { text: "ã€çµå±€ï¼šé­”åŠ›åå™¬ã€‘\nå’’èªåœ¨æœ€å¾Œä¸€åˆ»è¢«æ‰“æ–·ï¼Œç‹‚æš´çš„é­”åŠ›å°‡ä½ èˆ‡æ€ªç‰©ä¸€åŒåå™¬...", rewards: { exp: 500 } } },
                { label: "é–å®šæ­»è§’ï¼Œè‡´å‘½ä¸€æ“Šï¼(åˆºå®¢æª¢å®š)", condition: { tags: ['class_rogue'] }, style: "danger", check: { stat: 'AGI', val: 8 }, action: "finish_chain", nextScene: { text: "ã€çµå±€ï¼šæš—å½±ä¹‹ç‹ã€‘\nä½ åŒ–ä½œä¸€é“æ®˜å½±ï¼Œåœ¨æ€ªç‰©å’†å“®çš„ç¬é–“ï¼Œç²¾æº–åœ°åˆ‡æ–·äº†å®ƒçš„å’½å–‰ã€‚", rewards: { exp: 2000, title: "æš—å½±åˆºå®¢" } }, failScene: { text: "ã€çµå±€ï¼šå–‹è¡€é™°å½±ã€‘\nä½ çš„é€Ÿåº¦ç¨å¾®æ…¢äº†ä¸€æ‹ï¼Œæ€ªç‰©çš„å°¾å·´å°‡ä½ ç‹ ç‹ æƒé£›ï¼ŒåŠ‡ç—›å¥ªèµ°äº†ä½ çš„æ„è­˜...", rewards: { exp: 500 } } }
            ]
        }
    );

    console.log("ğŸ•µï¸â€â™‚ï¸ åŠ‡æœ¬å·²è¼‰å…¥");
})();